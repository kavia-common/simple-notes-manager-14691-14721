{"is_source_file": true, "format": "TypeScript", "description": "This file contains client-side authentication utility functions, managing user state and tokens, and handling redirects for login.", "external_files": ["./types", "./api"], "external_methods": ["API.token", "API.me", "API.setToken"], "published": ["getAuthState", "ensureAuthenticated", "logout", "setAuth"], "classes": [], "methods": [{"name": "export function getAuthState(): AuthState { getAuthState", "description": "Returns a copy of the current authentication state.", "scope": "", "scopeKind": ""}, {"name": "export async function ensureAuthenticated(redirectToLogin = true): Promise<boolean> { ensureAuthenticated", "description": "Ensures the user is authenticated; optionally redirects to login if not.", "scope": "", "scopeKind": ""}, {"name": "export function logout() { logout", "description": "Clears authentication tokens and user info, redirects to login.", "scope": "", "scopeKind": ""}, {"name": "export function setAuth(token: string, user: User) { setAuth", "description": "Sets authentication token and user info.", "scope": "", "scopeKind": ""}], "calls": ["API.token", "API.me", "API.setToken", "window.location.href"], "search-terms": ["auth", "client-side", "User", "token management", "redirect"], "state": 2, "file_id": 9, "knowledge_revision": 20, "git_revision": "", "ctags": [{"_type": "tag", "name": "AuthState", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-14691-14721/notes_frontend/src/lib/auth.ts", "pattern": "/^type AuthState = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "ensureAuthenticated", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-14691-14721/notes_frontend/src/lib/auth.ts", "pattern": "/^export async function ensureAuthenticated(redirectToLogin = true): Promise<boolean> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getAuthState", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-14691-14721/notes_frontend/src/lib/auth.ts", "pattern": "/^export function getAuthState(): AuthState {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "logout", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-14691-14721/notes_frontend/src/lib/auth.ts", "pattern": "/^export function logout() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-14691-14721/notes_frontend/src/lib/auth.ts", "pattern": "/^    const res = await API.me();$/", "language": "TypeScript", "kind": "constant", "scope": "ensureAuthenticated", "scopeKind": "function"}, {"_type": "tag", "name": "setAuth", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-14691-14721/notes_frontend/src/lib/auth.ts", "pattern": "/^export function setAuth(token: string, user: User) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-14691-14721/notes_frontend/src/lib/auth.ts", "pattern": "/^const state: AuthState = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-14691-14721/notes_frontend/src/lib/auth.ts", "pattern": "/^  const token = API.token;$/", "language": "TypeScript", "kind": "constant", "scope": "ensureAuthenticated", "scopeKind": "function"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-14691-14721/notes_frontend/src/lib/auth.ts", "pattern": "/^  token: null,$/", "language": "TypeScript", "kind": "constant"}], "hash": "e27cf0ce8851f4ae42eb24871bc498de", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/src/lib/auth.ts", "revision_history": [{"20": ""}]}