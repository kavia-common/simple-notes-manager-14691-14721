{"is_source_file": true, "format": "TypeScript", "description": "This file defines an API client for a notes backend service. It provides methods to perform CRUD operations on notes, handle authentication, and manage API configuration such as base URL and auth tokens. It is intended for use in the frontend application to communicate with the backend managing notes data.", "external_files": ["./types"], "external_methods": ["fetch"], "published": ["API"], "classes": [], "methods": [{"name": "get baseUrl", "description": "Retrieves the backend base URL, defaulting to '/api' if not set in the global window object."}, {"name": "get token", "description": "Reads the stored authentication token from localStorage."}, {"name": "setToken", "description": "Stores or removes the authentication token in localStorage."}, {"name": "request", "description": "Performs an HTTP request with optional authentication, handles response parsing, and error handling."}, {"name": "login", "description": "Authenticates a user with email and password, returns a token and user info."}, {"name": "register", "description": "Registers a new user with email, password, and optional name, returns a token and user info."}, {"name": "me", "description": "Fetches the current authenticated user information."}, {"name": "listNotes", "description": "Retrieves a list of notes, optionally filtered by a query string."}, {"name": "getNote", "description": "Retrieves a specific note by ID."}, {"name": "createNote", "description": "Creates a new note with title and content."}, {"name": "updateNote", "description": "Updates an existing note's title and/or content."}, {"name": "deleteNote", "description": "Deletes a note by ID."}], "calls": ["fetch", "localStorage.getItem", "localStorage.setItem", "localStorage.removeItem"], "search-terms": ["api.ts", "Notes API client", "auth token management", "fetch wrapper", "notes CRUD"], "state": 2, "file_id": 8, "knowledge_revision": 23, "git_revision": "", "revision_history": [{"18": ""}, {"23": ""}], "ctags": [{"_type": "tag", "name": "API", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-14691-14721/notes_frontend/src/lib/api.ts", "pattern": "/^export const API = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "baseUrl", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-14691-14721/notes_frontend/src/lib/api.ts", "pattern": "/^  get baseUrl(): string {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "contentType", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-14691-14721/notes_frontend/src/lib/api.ts", "pattern": "/^    const contentType = res.headers.get(\"content-type\") || \"\";$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-14691-14721/notes_frontend/src/lib/api.ts", "pattern": "/^    const data = (payloadJson as T) ?? (payloadText as unknown as T);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-14691-14721/notes_frontend/src/lib/api.ts", "pattern": "/^      const error =$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-14691-14721/notes_frontend/src/lib/api.ts", "pattern": "/^    const headers: Record<string, string> = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "payloadJson", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-14691-14721/notes_frontend/src/lib/api.ts", "pattern": "/^    let payloadJson: unknown = null;$/", "language": "TypeScript", "kind": "variable"}, {"_type": "tag", "name": "payloadText", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-14691-14721/notes_frontend/src/lib/api.ts", "pattern": "/^    let payloadText: string | null = null;$/", "language": "TypeScript", "kind": "variable"}, {"_type": "tag", "name": "qs", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-14691-14721/notes_frontend/src/lib/api.ts", "pattern": "/^    const qs = query ? `?q=${encodeURIComponent(query)}` : \"\";$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-14691-14721/notes_frontend/src/lib/api.ts", "pattern": "/^    const res = await fetch(`${this.baseUrl}${path}`, {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-14691-14721/notes_frontend/src/lib/api.ts", "pattern": "/^    const token = this.token;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "w", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-14691-14721/notes_frontend/src/lib/api.ts", "pattern": "/^      const w = window as unknown as { __NOTES_API_BASE__?: string };$/", "language": "TypeScript", "kind": "constant"}], "hash": "0056026e2ef640fb0b2f7694c6424292", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/src/lib/api.ts", "fields": [{"name": "let payloadJson: unknown = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let payloadText: string | null = null;", "scope": "", "scopeKind": "", "description": "unavailable"}]}